<!DOCTYPE html>
<html>
<head>
	<title>Kort</title>
	<style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
       	width: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
</head>
<body>
<div id="map"></div>
    <script>
      var fullRoute = JSON.parse(localStorage.getItem("route"));
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), 
        {
          center: {lat: 63.1143, lng: 7.7343},
          zoom: 8
        });

        let index = new URLSearchParams(window.location.search).get("index");

        for (var i = 0; i < fullRoute[index].route.length; i++) {
          //console.log(fullRoute[index].route[i])

          for (var j = 0; j < fullRoute[index].route[i].waypoints.shapes.length; j++) {
            

            console.log(fullRoute[index].route[i].waypoints.color.red, fullRoute[index].route[i].waypoints.color.green, fullRoute[index].route[i].waypoints.color.blue)
            //console.log('#' + fullRoute[index].route[i].waypoints.color.red.toString(16) + fullRoute[index].route[i].waypoints.color.green.toString(16) + fullRoute[index].route[i].waypoints.color.blue.toString(16))

            var cascadiaFault = new google.maps.Polyline({
              strokeColor: '#' + fullRoute[index].route[i].waypoints.color.red.toString(16) + fullRoute[index].route[i].waypoints.color.green.toString(16) + fullRoute[index].route[i].waypoints.color.blue.toString(16),
              strokeOpacity: 1,
              strokeWeight: 100,
              path: google.maps.geometry.encoding.decodePath(fullRoute[index].route[i].waypoints.shapes[j].encodedWaypoints)
            });

            cascadiaFault.setMap(map);
          }
        }

      }
    </script>

	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCo64tGtuF4iuRlCoxM9k3jaL8KMvqqvq4&callback=initMap&libraries=geometry"
    async defer></script>


</body>
</html>